<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Selamat Ulang Tahun, Sayang üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;800&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{--bg1:#F3D0D7;--bg2:#F6F5F2;--card:#F6F5F2;--accent:#FF90BB}
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:radial-gradient(circle at 10% 10%, rgba(255,255,255,0.15), transparent 20%),
                 linear-gradient(135deg,var(--bg1),var(--bg2));
      font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      color:#533B4D;padding:24px;
    }
    .card{
      width:100%;max-width:900px;background:var(--card);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.12);
      overflow:hidden;display:grid;grid-template-columns:1fr 420px;gap:0;align-items:stretch;
    }
    @media (max-width:900px){.card{grid-template-columns:1fr}}

    .left{padding:40px}
    .logo{font-family:'Great Vibes';font-size:36px;color:var(--accent);}
    h1{margin:10px 0 6px;font-size:28px}
    p.lead{margin:0 0 18px;color:#533B4D}

    .message-box{background:linear-gradient(180deg,#fff 0%,#fff0 100%);padding:18px;border-radius:12px;border:1px solid rgba(0,0,0,0.04)}
    .typewriter{font-family: "Courier New", Courier, monospace; font-size:18px;min-height:120px;line-height:1.6}
    .controls{margin-top:18px;display:flex;gap:10px;flex-wrap:wrap}
    button{background:var(--accent);border:none;color:#fff;padding:10px 16px;border-radius:10px;cursor:pointer;font-weight:600}
    button.secondary{background:transparent;color:var(--accent);border:2px solid var(--accent)}

    .right{background:linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));padding:28px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px}
    .photo {
      width: 100%;
      padding-bottom: 133.33%; /* 4/3 ratio */
      position: relative;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: inset 0 0 60px rgba(255,255,255,0.04);
    }
    .photo video {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .hearts{display:flex;gap:8px;align-items:center}
    .small{font-size:14px;color:#533B4D}

    /* canvas love jatuh */
    #confetti{position:fixed;left:0;top:0;pointer-events:none;width:100%;height:100%;z-index:999}

    footer{font-size:13px;color:#533B4D;margin-top:12px}

    .hidden{display:none}
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="card" role="main">
    <div class="left">
      <div class="logo">This's for You, <br> My Sweety üíå</div>
      <h1 id="title">Happy 21st Birthday!</h1>
      <p class="lead"><code>click the button to open the message! (volume up üîä)</code></p>

      <div class="message-box">
        <div id="type" class="typewriter" aria-live="polite"></div>
      </div>

      <div class="controls">
        <button id="reveal">Click Here!</button>
      </div>

      <footer> <code>Mama Turning 21 ü´∂</code> </footer>
    </div>

    <div class="right">
      <div class="photo">
        <video id="video" autoplay loop muted playsinline>
          <source src="v.mp4" type="video/mp4">
          Browsermu tidak mendukung video.
        </video>
      </div>
      <div class="hearts">
        <div class="small"> <code>Sending virtual hug ü§óüíñ</code></div>
      </div>
    </div>
  </div>

  <audio id="audio" loop>
    <source src="p.mp3" type="audio/mpeg">
    Browsermu tidak mendukung audio.
  </audio>

  <script>
    // --- Teks pesan ---
    const message = `Happy Birthday My Sweetheart!

Panjang umur sehat selalu mama, semoga makin berkah, makin lancar rejekinya, makin pinter, makin rajin solat, makin manutan, makin syg sm ak hehe AAMIIN.

Maaf ya mama aku belom bisa pulang buat main sama mama :(

Makasi ya ma udah bisa bikin aku percaya lagi sama kamu, makasi banyak udah mau berubah buat aku, udah mau nurutin semua yang aku mau, udah mau LDR-an sama aku padahal kamu pernah bilang kalo kamu gasuka banget sama LDR :(, makasi udah mau sabar menhadapi dunia per-strict parent-an ini.. 

Mama do you remember your birthday last year.. haha mama to be honest i still feel guilty for you both.. i still afraid kena karma lagi.. aku inget pas kamu cutoff dia perasaan kamu ke aku juga ilang kan.. i remember all to well.. aku tkut tahun ini abis kamu ultah kamu gitu lagi ke aku.. semoga cuma rasa takut aku doang ya ma jangan sampe kejadian..

Semoga kita bisa terus ngerayain birthday bareng-bareng selamanya ya mama, semoga kamu gk bosen lagi sama ak huhu :(

Thank you for still loving me. Always be my one call away, mama! happy birthday love <3`;

    const typeEl = document.getElementById('type');
    const revealBtn = document.getElementById('reveal');
    const audio = document.getElementById('audio');

    // efek ketikan
    function typeText(text, el, speed=20){
      el.innerHTML = '';
      let i=0;
      const interval = setInterval(()=>{
        const char = text[i];
        if(!char){ clearInterval(interval); return; }
        if(char === '\n'){ el.innerHTML += '<br/>' }
        else{ el.innerHTML += char }
        i++;
      }, speed);
    }

    // canvas
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth;
    let H = canvas.height = window.innerHeight;
    window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; });

    function random(min, max){ return Math.random()*(max-min)+min }

    // bentuk love
    function Heart(){
      this.x = random(0, W);
      this.y = random(-H, -20);
      this.size = random(12, 26);
      this.vx = random(-1, 1);
      this.vy = random(2, 5);
      this.rot = random(0, Math.PI*2);
      this.color = `hsl(${~~random(330, 360)}, 80%, 60%)`; // pink-merah
    }
    Heart.prototype.draw = function(){
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rot);
      ctx.scale(this.size/20, this.size/20);
      ctx.beginPath();
      ctx.moveTo(0, -10);
      ctx.bezierCurveTo(10, -20, 25, -5, 0, 20);
      ctx.bezierCurveTo(-25, -5, -10, -20, 0, -10);
      ctx.closePath();
      ctx.fillStyle = this.color;
      ctx.fill();
      ctx.restore();
    }

    const hearts = [];
    function startConfetti(count=120){
      for(let i=0;i<count;i++) hearts.push(new Heart());
      animateConfetti();
      setTimeout(()=>{ stopConfetti(); }, 8000);
    }

    let confettiAnim = null;
    function animateConfetti(){
      ctx.clearRect(0,0,W,H);
      for(let i=hearts.length-1;i>=0;i--){
        const h = hearts[i];
        h.x += h.vx; h.y += h.vy; h.rot += 0.03;
        h.draw();
        if(h.y > H+20) hearts.splice(i,1);
      }
      if(hearts.length>0) confettiAnim = requestAnimationFrame(animateConfetti);
    }
    function stopConfetti(){
      cancelAnimationFrame(confettiAnim);
      hearts.length=0;
      ctx.clearRect(0,0,W,H);
    }

    // klik tombol
    revealBtn.addEventListener('click', ()=>{
      typeText(message, typeEl, 18);
      startConfetti(200); // makin banyak love
      if(audio.paused){
        audio.play().catch(err => {
          console.log("Autoplay dicegah browser: ", err);
        });
      }
    });

    // preview singkat
    window.addEventListener('load', ()=>{
      document.getElementById('title').textContent = 'Selamat Ulang Tahun, Sayang ‚ù§Ô∏è';
      const preview = message.split('\n').slice(0,2).join(' ');
      typeText(preview+'...', typeEl, 6);
    });
  </script>
</body>
</html>
